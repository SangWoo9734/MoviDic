{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\psu84\\\\movidic\\\\movie_react\\\\src\\\\App.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { Navbar, Container, Nav, Modal, Button, Form } from 'react-bootstrap';\nimport React, { useEffect, useState } from 'react';\nimport { BrowserRouter, Route, Switch, useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport './App.css';\nimport whale from './img/whale.png';\nimport google from './img/google.png';\nimport Boxoffice from './main.js';\nimport Search from './search.js';\nimport History from './history.js';\nimport MyPage from './myPage.js';\nimport { authService, firebaseInstance } from './fbase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  var [loginModal, setLoginModal] = useState(false);\n  var [loginState, setLoginState] = useState(localStorage.getItem('isLogin') ? true : false);\n  var [userInfo, setUserInfo] = useState(localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')) : {});\n  let history = useHistory();\n\n  const onLogOutClick = () => {\n    authService.signOut();\n    localStorage.removeItem('isLogin');\n    localStorage.removeItem('userInfo');\n    localStorage.removeItem('liked');\n    setLoginState(false);\n    setUserInfo({});\n    console.log(1);\n    history.push('/');\n  };\n\n  useEffect(() => {\n    if (userInfo != {}) {\n      axios.get('/public/createUserLike', {\n        params: {\n          email: userInfo.email\n        }\n      }).then(result => {\n        localStorage.setItem('liked', result.data.liked);\n      });\n    }\n  }, [userInfo]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      bg: \"dark\",\n      variant: \"dark\",\n      className: \"navbar\",\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(Navbar.Brand, {\n          href: \"/\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: whale,\n            style: {\n              width: '40px',\n              height: '40px',\n              marginRight: '10px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"MOVIDIC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Navbar.Collapse, {\n          id: \"responsive-navbar-nav\",\n          children: [/*#__PURE__*/_jsxDEV(Nav, {\n            className: \"me-auto\",\n            children: [/*#__PURE__*/_jsxDEV(Nav.Link, {\n              href: \"/search\",\n              children: \"SEARCH\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(Nav.Link, {\n              href: \"/history\",\n              children: \"HISTORY\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(Nav, {\n            children: loginState ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Nav.Link, {\n                href: \"/my\",\n                children: \"MY\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 64,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"loginUser\",\n                children: userInfo.firstName + userInfo.lastName + ' 님 환영합니다.'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary\",\n                onClick: () => {\n                  onLogOutClick();\n                  alert('로그아웃 되었습니다.');\n                },\n                children: \"LOGOUT\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary\",\n              onClick: () => {\n                setLoginModal(true);\n              },\n              children: \"LOGIN\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 12\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Login, {\n      show: loginModal,\n      onHide: () => setLoginModal(false),\n      setLoginState: setLoginState,\n      userInfo: userInfo,\n      setUserInfo: setUserInfo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(BrowserRouter, {\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          component: Boxoffice\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/search\",\n          component: Search\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/history\",\n          component: History\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/my\",\n          component: MyPage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 3\n  }, this);\n}\n\n_s(App, \"zwS3rmpFzL1d0byyeoD8bfeRycQ=\", false, function () {\n  return [useHistory];\n});\n\n_c = App;\n\nfunction Login(props) {\n  _s2();\n\n  var [email, setEmail] = useState('');\n  var [password, setPassword] = useState('');\n  var [firstName, setFirstName] = useState('');\n  var [lastName, setLastName] = useState('');\n  var [newAcc, setNewAcc] = useState(true);\n\n  const onChange = e => {\n    const {\n      target: {\n        name,\n        value\n      }\n    } = e;\n\n    if (name === 'email') {\n      setEmail(value);\n    } else if (name === 'password') {\n      setPassword(value);\n    } else if (name === 'firstName') {\n      setFirstName(value);\n    } else if (name === 'lastName') {\n      setLastName(value);\n    }\n  };\n\n  const onSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      let data;\n      let userData;\n\n      if (newAcc) {\n        // login\n        data = await authService.signInWithEmailAndPassword(email, password);\n      } else {\n        // create account\n        data = await authService.createUserWithEmailAndPassword(email, password);\n        userData = {\n          firstName: firstName,\n          lastName: lastName,\n          email: email\n        };\n      } // props.setUserInfo(userData);\n\n\n      setFirstName('');\n      setLastName('');\n      setEmail('');\n      setPassword('');\n      props.onHide(false);\n      props.setLoginState(true);\n      localStorage.setItem('userInfo', JSON.stringify(userData));\n      localStorage.setItem('isLogin', true);\n    } catch (err) {\n      console.log(err);\n      alert('유효한 사용자가 없습니다.');\n    }\n  };\n\n  const onGoogleClick = async event => {\n    const {\n      target: {\n        name\n      }\n    } = event;\n    let provider;\n\n    if (name === 'google') {\n      provider = new firebaseInstance.auth.GoogleAuthProvider();\n    }\n\n    const data = await authService.signInWithPopup(provider);\n    const userData = {\n      firstName: data.additionalUserInfo.profile.family_name,\n      lastName: data.additionalUserInfo.profile.given_name,\n      email: data.additionalUserInfo.profile.email\n    };\n    props.setUserInfo(userData);\n    props.onHide(false);\n    props.setLoginState(true);\n    localStorage.setItem('userInfo', JSON.stringify(userData));\n    localStorage.setItem('isLogin', true);\n  };\n\n  const toggleAccount = () => setNewAcc(prev => !prev);\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    show: props.show,\n    onHide: props.onHide,\n    className: \"login-modal\",\n    size: \"lg\",\n    \"aria-labelledby\": \"contained-modal-title-vcenter\",\n    centered: true,\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n        id: \"contained-modal-title-vcenter\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: onSubmit,\n        children: [!newAcc ? /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"login-input\",\n            name: \"firstName\",\n            type: \"text\",\n            placeholder: \"First Name\",\n            required: true,\n            value: firstName,\n            onChange: onChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"login-input\",\n            name: \"lastName\",\n            type: \"text\",\n            placeholder: \"Last Name\",\n            required: true,\n            value: lastName,\n            onChange: onChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 9\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"login-input\",\n          name: \"email\",\n          type: \"email\",\n          placeholder: \"Email\",\n          required: true,\n          value: email,\n          onChange: onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"login-input\",\n          name: \"password\",\n          type: \"password\",\n          placeholder: \"Password\",\n          required: true,\n          value: password,\n          onChange: onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: newAcc ? 'btn btn-primary' : 'btn btn-success',\n          type: \"submit\",\n          value: newAcc ? \"Login\" : \"Create Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        name: \"google\",\n        className: \"btn btn-secondary\",\n        onClick: onGoogleClick,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: google,\n          style: {\n            width: '20px',\n            height: '20px',\n            marginBottom: '5px',\n            marginRight: '10px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 81\n        }, this), \"Login with Google\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: newAcc ? 'btn btn-success' : 'btn btn-primary',\n        onClick: toggleAccount,\n        children: newAcc ? \"Create New Account\" : \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: props.onHide,\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 3\n  }, this);\n}\n\n_s2(Login, \"0ykVRmXrK0EjZOqToVBO6e645Lg=\");\n\n_c2 = Login;\nexport default App;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"Login\");","map":{"version":3,"sources":["C:/Users/psu84/movidic/movie_react/src/App.js"],"names":["Navbar","Container","Nav","Modal","Button","Form","React","useEffect","useState","BrowserRouter","Route","Switch","useHistory","axios","whale","google","Boxoffice","Search","History","MyPage","authService","firebaseInstance","App","loginModal","setLoginModal","loginState","setLoginState","localStorage","getItem","userInfo","setUserInfo","JSON","parse","history","onLogOutClick","signOut","removeItem","console","log","push","get","params","email","then","result","setItem","data","liked","width","height","marginRight","firstName","lastName","alert","Login","props","setEmail","password","setPassword","setFirstName","setLastName","newAcc","setNewAcc","onChange","e","target","name","value","onSubmit","preventDefault","userData","signInWithEmailAndPassword","createUserWithEmailAndPassword","onHide","stringify","err","onGoogleClick","event","provider","auth","GoogleAuthProvider","signInWithPopup","additionalUserInfo","profile","family_name","given_name","toggleAccount","prev","show","marginBottom"],"mappings":"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","sourcesContent":["import { Navbar, Container, Nav, Modal, Button, Form} from 'react-bootstrap';\nimport React, { useEffect, useState } from 'react'\nimport { BrowserRouter, Route, Switch, useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport './App.css';\nimport whale from './img/whale.png';\nimport google from './img/google.png';\n\nimport Boxoffice from './main.js';\nimport Search from './search.js';\nimport History from './history.js';\nimport MyPage from './myPage.js';\nimport { authService, firebaseInstance } from './fbase';\n\n\nfunction App() {\n\n\tvar [loginModal, setLoginModal] = useState(false);\n\tvar [loginState, setLoginState] = useState(localStorage.getItem('isLogin') ? true : false);\n\tvar [userInfo, setUserInfo] = useState(localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')) : {});\n\n\tlet history = useHistory();\n\n\tconst onLogOutClick = () => {\n\t\tauthService.signOut();\n\t\tlocalStorage.removeItem('isLogin');\n\t\tlocalStorage.removeItem('userInfo');\n\t\tlocalStorage.removeItem('liked');\n\t\tsetLoginState(false);\n\t\tsetUserInfo({});\n\t\tconsole.log(1);\n\t\thistory.push('/');\n\t}\n\n\tuseEffect(() => {\n\t\tif (userInfo != {}) {\n\t\t\taxios.get('/public/createUserLike', {\n\t\t\t\tparams : {\n\t\t\t\t\temail : userInfo.email,\n\t\t\t\t}\n\t\t\t}).then( result => {\n\t\t\t\tlocalStorage.setItem('liked', result.data.liked);\n\t\t\t})\n\t\t}\n    }, [userInfo]);\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Navbar bg=\"dark\" variant=\"dark\" className=\"navbar\">\n\t\t\t\t<Container className='text-center'>\n\t\t\t\t\t\t<Navbar.Brand href=\"/\">\n\t\t\t\t\t\t\t<img src={whale} style={{width: '40px', height : '40px', marginRight : '10px'}} />\n\t\t\t\t\t\t\t<span>MOVIDIC</span>\n\t\t\t\t\t\t</Navbar.Brand>\n\t\t\t\t\t\t<Navbar.Collapse id=\"responsive-navbar-nav\">\n\t\t\t\t\t\t\t<Nav className=\"me-auto\">\n\t\t\t\t\t\t\t\t<Nav.Link href=\"/search\">SEARCH</Nav.Link>\n\t\t\t\t\t\t\t\t<Nav.Link href=\"/history\">HISTORY</Nav.Link>\n\t\t\t\t\t\t\t</Nav>\n\t\t\t\t\t\t\t<Nav>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tloginState\n\t\t\t\t\t\t\t\t\t? <>\n\t\t\t\t\t\t\t\t\t\t<Nav.Link href=\"/my\">MY</Nav.Link>\n\t\t\t\t\t\t\t\t\t\t<p className='loginUser'>{userInfo.firstName + userInfo.lastName + ' 님 환영합니다.'}</p>\n\t\t\t\t\t\t\t\t\t\t<button className='btn btn-primary' onClick={() => {onLogOutClick(); alert('로그아웃 되었습니다.');}}>LOGOUT</button>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t: <button className='btn btn-primary' onClick={() => {setLoginModal(true)}}>LOGIN</button>\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t</Nav>\n\n\t\t\t\t\t\t</Navbar.Collapse>\n\t\t\t\t\t\t\n\t\t\t\t</Container>\n\t\t\t</Navbar>\n\n\t\t\t\n\t\t\t< Login show = {loginModal} onHide={() => setLoginModal(false)} setLoginState={setLoginState} userInfo = {userInfo} setUserInfo={setUserInfo}/>\n\t\t\t\n\t\t\t<BrowserRouter>\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route exact path={\"/\"} component={Boxoffice} />\n\t\t\t\t\t<Route exact path={\"/search\"} component={Search} />\n\t\t\t\t\t<Route exact path={\"/history\"} component={History} />\n\t\t\t\t\t<Route exact path={\"/my\"} component={MyPage} />\n\t\t\t\t</Switch>\n\t\t\t</BrowserRouter>\n\n\t\t</div>\n\t);\n}\n\nfunction Login(props) {\n\n\tvar [email, setEmail] = useState('');\n\tvar [password, setPassword] = useState('');\n\tvar [firstName, setFirstName] = useState('');\n\tvar [lastName, setLastName] = useState('');\n\tvar [newAcc, setNewAcc] = useState(true);\n\n\tconst onChange = (e) => {\n\t\tconst {target : {name, value}} = e;\n\t\tif (name === 'email'){\n\t\t\tsetEmail(value)\n\t\t} else if (name === 'password') {\n\t\t\tsetPassword(value);\n\t\t} else if (name === 'firstName') {\n\t\t\tsetFirstName(value);\n\t\t} else if (name === 'lastName') {\n\t\t\tsetLastName(value);\n\t\t}\n\t}\n\n\tconst onSubmit = async (e) => {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tlet data;\n\t\t\tlet userData;\n\n\t\t\tif (newAcc) {\n\t\t\t\t// login\n\t\t\t\tdata = await authService.signInWithEmailAndPassword(email, password);\n\t\t\t\t\n\t\t\t  } else {\n\t\t\t\t// create account\n\t\t\t\tdata = await authService.createUserWithEmailAndPassword(email, password);\n\t\t\t\tuserData = {\n\t\t\t\t\tfirstName : firstName,\n\t\t\t\t\tlastName : lastName,\n\t\t\t\t\temail : email,\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  \n\n\t\t\t\n\t\t\t// props.setUserInfo(userData);\n\t\t\tsetFirstName('');\n\t\t\tsetLastName('');\n\t\t\tsetEmail('');\n\t\t\tsetPassword('');\n\t\t\tprops.onHide(false);\t\n\t\t\tprops.setLoginState(true);\n\t\t\tlocalStorage.setItem('userInfo', JSON.stringify(userData));\n\t\t\tlocalStorage.setItem('isLogin', true);\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\talert('유효한 사용자가 없습니다.');\n\t\t}\n\t}\n\n\tconst onGoogleClick = async (event) => {\n\t\tconst {target: {name}} = event;\n\t\tlet provider;\n\t\t\n\t\tif (name === 'google') {\n\t\t  provider = new firebaseInstance.auth.GoogleAuthProvider();\n\t\t}\n\t\tconst data = await authService.signInWithPopup(provider);\n\t\tconst userData = {\n\t\t\tfirstName : data.additionalUserInfo.profile.family_name,\n\t\t\tlastName : data.additionalUserInfo.profile.given_name,\n\t\t\temail : data.additionalUserInfo.profile.email,\n\t\t}\n\n\t\tprops.setUserInfo(userData);\n\t\tprops.onHide(false);\n\t\tprops.setLoginState(true);\n\t\tlocalStorage.setItem('userInfo', JSON.stringify(userData));\n\t\tlocalStorage.setItem('isLogin', true);\n\t}\n\t\n\tconst toggleAccount = () => setNewAcc((prev) => !prev);\n\t\n\treturn (\n\t\t<Modal\n\t\tshow = {props.show}\n\t\tonHide = {props.onHide}\n\t\tclassName='login-modal'\n\t\tsize=\"lg\"\n\t\taria-labelledby=\"contained-modal-title-vcenter\"\n\t\tcentered\n\t\t>\n\t\t\t<Modal.Header >\n\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">Login</Modal.Title>\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Body>\n\t\t\t\t<form onSubmit={onSubmit}>\n\t\t\t\t\t{\n\t\t\t\t\t\t!newAcc\n\t\t\t\t\t\t? <span><input className='login-input' name=\"firstName\" type=\"text\" placeholder=\"First Name\" required value={firstName} onChange={onChange}/>\n\t\t\t\t\t\t<input className='login-input' name=\"lastName\" type=\"text\" placeholder=\"Last Name\" required value={lastName} onChange={onChange}/></span>\n\t\t\t\t\t\t: \tnull\n\t\t\t\t\t}\n\t\t\t\t\t<input className='login-input' name=\"email\" type=\"email\" placeholder=\"Email\" required value={email} onChange={onChange}/>\n\t\t\t\t\t<input className='login-input' name=\"password\" type=\"password\" placeholder=\"Password\" required value={password} onChange={onChange}/>\n\t\t\t\t\t\n\t\t\t\t\t<input  className={ newAcc ? 'btn btn-primary' : 'btn btn-success' } type=\"submit\" value={ newAcc ? \"Login\" : \"Create Account\" } />\n\t\t\t\t</form>\n\t\t\t</Modal.Body>\n\t\t\t<Modal.Footer>\n\t\t\t\t<button name=\"google\" className='btn btn-secondary' onClick={onGoogleClick}><img src={google} style={{width: '20px', height : '20px', marginBottom : '5px', marginRight : '10px'}} />Login with Google</button>\n\t\t\t\t<button className={ newAcc ? 'btn btn-success' : 'btn btn-primary' } onClick={toggleAccount}>{newAcc ? \"Create New Account\" : \"Login\"}</button>\n\t\t\t\t<Button onClick={props.onHide}>Close</Button>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t)\n}\n\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}